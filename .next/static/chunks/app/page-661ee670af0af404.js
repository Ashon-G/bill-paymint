(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6122:function(e,t,a){Promise.resolve().then(a.bind(a,8306))},8306:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return T}});var n=a(7821),s=a(8078),o=a(9823),l=a(8858),i=a.n(l);async function c(e,t,a){var n,s;switch(e){case"btc":n="bc1qmhg6z5dgnpsswwht0x53g7yucjqfahyc60fctn",s="btc";break;case"ltc":n="ltc1q4efmghs2zupatst89tstmjvahn89hnvkuan8qa",s="ltc";break;case"eth":n="0xa44E9D6E5C9b638D9CEE82fa02c3A21a985772a8",s="eth";break;case"doge":n="D59DKnQrMYswmfFik1dbqqVBksF9j4yZ1j",s="doge";break;case"trx":n="TK2vRkUtTKhZroAny7uqLkzTwBoXUbj4Um",s="trx";break;default:throw Error("Unsupported crypto currency")}try{let e=new URLSearchParams({callback:a,address:"1.0@".concat(n),pending:"0",confirmations:"1",email:"paygeoncard@gmail.com",post:"0",json:"1",priority:"default",multi_token:"0",multi_chain:"0",convert:"1"}).toString(),t=await fetch("https://api.cryptapi.io/".concat(s,"/create/?").concat(e),{method:"GET"}),o=await t.text(),l=JSON.parse(o);if(console.log(l),"success"==l.status)return l.address_in}catch(e){throw Error("Error generating address")}}a(341),a(1141);var r=e=>{let{textToCopy:t,onCopy:a}=e,[o,l]=(0,s.useState)(!1);return(0,n.jsx)("button",{className:"w-[40px] rounded-[0.4em] h-9 bg-white flex items-center justify-center",onClick:()=>{navigator.clipboard.writeText(t),l(!0),null==a||a(),setTimeout(()=>l(!1),2e3)},children:o?(0,n.jsx)("svg",{viewBox:"0 0 24 24",height:"18",width:"18",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("g",{children:(0,n.jsx)("path",{fill:"green",d:"M9.707 19.121a.997.997 0 0 1-1.414 0l-5.646-5.647a1.5 1.5 0 0 1 0-2.121l.707-.707a1.5 1.5 0 0 1 2.121 0L9 14.171l9.525-9.525a1.5 1.5 0 0 1 2.121 0l.707.707a1.5 1.5 0 0 1 0 2.121z"})})}):(0,n.jsx)("svg",{viewBox:"0 0 6.35 6.35",height:"20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("g",{children:(0,n.jsx)("path",{fill:"currentColor",d:"M2.43.265c-.3 0-.548.236-.573.53h-.328a.74.74 0 0 0-.735.734v3.822a.74.74 0 0 0 .735.734H4.82a.74.74 0 0 0 .735-.734V1.529a.74.74 0 0 0-.735-.735h-.328a.58.58 0 0 0-.573-.53zm0 .529h1.49c.032 0 .049.017.049.049v.431c0 .032-.017.049-.049.049H2.43c-.032 0-.05-.017-.05-.049V.843c0-.032.018-.05.05-.05zm-.901.53h.328c.026.292.274.528.573.528h1.49a.58.58 0 0 0 .573-.529h.328a.2.2 0 0 1 .206.206v3.822a.2.2 0 0 1-.206.205H1.53a.2.2 0 0 1-.206-.205V1.529a.2.2 0 0 1 .206-.206z"})})})})},d=a(9197),u=a(1484),m=a.n(u),h=e=>{let{children:t,onClick:a,disabled:s=!1,className:o=""}=e;return(0,n.jsx)("div",{className:"".concat(m().cardContainer," ").concat(o),children:(0,n.jsxs)("div",{className:m().btnContainer,children:[(0,n.jsx)("div",{className:m().btnMain,children:(0,n.jsx)("button",{className:m().btn3d,onMouseDown:e=>{e.target.classList.add(m().down)},onMouseUp:e=>{e.target.classList.remove(m().down)},onTouchStart:e=>{e.target.classList.add(m().down)},onTouchEnd:e=>{e.target.classList.remove(m().down)},onClick:a,disabled:s,children:t})}),(0,n.jsx)("div",{className:m().shadow})]})})};let p=(0,o.default)(()=>Promise.all([a.e(857),a.e(466),a.e(822)]).then(a.bind(a,5822)),{loadableGenerated:{webpack:()=>[5822]},ssr:!1});function x(){let[e,t]=(0,s.useState)(null),[a,o]=(0,s.useState)(null),[l,u]=(0,s.useState)(null),[m,x]=(0,s.useState)(null),[b,f]=(0,s.useState)("btc"),[g,v]=(0,s.useState)("btc"),[w,j]=(0,s.useState)(null),[y,N]=(0,s.useState)(null),[C,P]=(0,s.useState)(null),[E,T]=(0,s.useState)(null),[_,k]=(0,s.useState)(0),S=(0,s.useRef)(null),B=()=>{o(null),u(null),x(null),j(null),N(null)},D=async t=>{let a=t||e;if(a)try{let e=await i().recognize(a,"eng",{logger:e=>console.log(e)});o(e.data.text),O(e.data.text);let t=M(e.data.text);if(!t){console.error("Failed to extract data from OCR");return}u(t);let n=U(t.amountDue);x(n.toFixed(2));let s=await c(b,n,"https://paygeon.com/api/payment");N(s),console.log(s),A(t.amountDue,n-t.amountDue,b)}catch(e){console.error("Error processing the image with Tesseract:",e)}},O=e=>{console.log(e);let t=e.match(RegExp("(?<=Bill\\s?To:?\\n|Customer:?\\n|To:?\\n).*(?:\\n.*){2}","i")),a=e.match(RegExp("(?<=From:?\\n|Merchant:?\\n).*(?:\\n.*){2}","i")),n=e.match(/(?:Notes|Memo)\s*:\s*(.*)/i),s=[],o=[];t&&(s=t[0].split("\n").map(e=>e.trim())),a&&(o=a[0].split("\n").map(e=>e.trim()));let[l,i,c]=[s.length>0?s[0].split(" ").slice(0,2).join(" "):"",s.length>1?s[1].split(" ")[0]:"",s.length>2?s[2]:""],[r,d,u,m]=[o.length>0?o[0]:"",o.length>1?o[1].split(" ")[0]:"",o.length>2?o[2]:"",n?n[1]:""];P({name:l,email:i,address:c}),T({name:r,email:d,address:u,account:m})},M=e=>{let t=e.match(/(?:Amount|Amount Due|Balance|Balance Due|Total|Total Due)\s*:?\s*\$?([\d,]+(?:\.\d{2})?)/i);if(!t)return console.error("Failed to extract amount due from OCR"),null;var a=parseFloat(t[1].replace(/,/g,""));return isNaN(a)?(console.error("Failed to parse amount due as number"),null):{amountDue:a}},U=e=>e+1.35/100*e+2.55,A=async(e,t,a)=>{let n=new URLSearchParams({value:"".concat(e+t),from:"usd"}).toString(),s=await fetch("https://api.cryptapi.io/".concat(a,"/convert/?").concat(n),{method:"GET"}),o=JSON.parse(await s.text());"success"==o.status&&(j(o.value_coin),f(a))},R=async e=>{let t=e.target.value;if(v(t),m&&l){try{let e=await c(t,m,"https://paygeon.com/api/payment");N(e)}catch(e){console.error("Error generating crypto address:",e)}await A(l.amountDue,m-l.amountDue,t)}};return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen py-2",children:[(0,n.jsx)("div",{className:"bg-transparent w-full h-[600px] flex justify-center items-center",children:(0,n.jsx)(p,{})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{onClick:()=>{let e=window.screen.width,a=window.screen.height,n=window.open("","CameraWindow","width=".concat(e,",height=").concat(a,",left=0,top=0"));if(n){n.document.write('\n      <html>\n        <head>\n          <style>\n            body {\n              display: flex;\n              flex-direction: column;\n              align-items: center;\n              justify-content: center;\n              margin: 0;\n              height: 100%;\n              background-color: #f0f0f0;\n            }\n            #camera-root {\n              display: flex; \n              flex-direction: column; \n              align-items: center; \n              justify-content: center;\n              height: 97%;\n            }\n            #video {\n              height: 100%;\n            }\n            #capture-button {\n              margin-top: 10px;\n              padding: 10px 20px;\n              font-size: 16px;\n              background-color: #4CAF50;\n              color: white;\n              border: none;\n              cursor: pointer;\n              border-radius: 5px;\n              align-self: center;\n            }\n            #capture-button:hover {\n              background-color: #45a049;\n            }\n          </style>\n        </head>\n        <body>\n          <div id="camera-root">\n            <video id="video" autoplay></video>\n            <button id="capture-button">Capture Photo</button>\n            <canvas id="canvas" style="display:none;"></canvas>\n          </div>\n        </body>\n      </html>\n    '),n.document.close();let e=a=>{if(a.origin===window.location.origin&&"CAPTURED_PHOTO"===a.data.type){let s=a.data.photo;t(s),B(),D(s),window.removeEventListener("message",e),n.close()}};window.addEventListener("message",e);let a=n.document.createElement("script");a.innerHTML="\n      (function() {\n        const video = document.getElementById('video');\n        const canvas = document.getElementById('canvas');\n        const captureButton = document.getElementById('capture-button');\n\n        navigator.mediaDevices.getUserMedia({ video: true })\n          .then((stream) => {\n            video.srcObject = stream;\n          })\n          .catch((error) => {\n            console.error('Error accessing the camera: ', error);\n          });\n\n        captureButton.onclick = () => {\n          const context = canvas.getContext('2d');\n          canvas.width = video.videoWidth;\n          canvas.height = video.videoHeight;\n          context.drawImage(video, 0, 0, canvas.width, canvas.height);\n          const dataUrl = canvas.toDataURL('image/png');\n          window.opener.postMessage({ type: 'CAPTURED_PHOTO', photo: dataUrl }, window.location.origin);\n        };\n      })();\n    ",n.document.body.appendChild(a)}},className:"custom-button custom-white-button",children:"Take a Photo"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{type:"file",accept:"image/*",ref:S,style:{display:"none"},onChange:e=>{e.target.files&&e.target.files[0]&&(t(e.target.files[0]),B(),D(e.target.files[0]))}}),(0,n.jsx)("button",{onClick:()=>{S.current&&S.current.click()},className:"custom-button custom-white-button",children:"Choose File"}),e?(0,n.jsxs)("p",{className:"display-text italic whitespace-nowrap overflow-hidden text-ellipsis pl-4",children:["Selected file: ",e.name?e.name:"captured_photo"]}):(0,n.jsx)("p",{className:"text-box",children:"No file chosen"})]}),E&&(0,n.jsx)("hr",{className:"separating-line"}),E&&m&&l&&l.amountDue&&(0,n.jsxs)("div",{className:"display-text",children:[(0,n.jsx)("h2",{className:"text-xl font-bold",children:"Paying To:"}),(0,n.jsx)("pre",{className:"whitespace-pre-wrap",children:E.name}),(0,n.jsx)("h2",{className:"text-xl font-bold",children:"Invoice Amount:"}),(0,n.jsxs)("pre",{className:"whitespace-pre-wrap",children:["$ ",l.amountDue.toFixed(2)]}),(0,n.jsx)("h2",{className:"text-xl font-bold",children:"Total Amount:"}),(0,n.jsxs)("pre",{className:"whitespace-pre-wrap",children:["$ ",m]})]}),E&&!m&&(0,n.jsx)("div",{className:"display-text",children:(0,n.jsx)("pre",{className:"whitespace-pre-wrap",children:"Unable to recognize text. Please try again."})}),null!==m&&(0,n.jsx)("hr",{className:"separating-line"}),null!==m&&(0,n.jsxs)("div",{className:"display-text",children:[(0,n.jsx)("h2",{className:"text-xl font-bold",children:"Choose crypto to pay with: "}),(0,n.jsxs)("select",{className:"dropdown-options",id:"cryptoOptions",value:g,onChange:R,children:[(0,n.jsx)("option",{value:"btc",children:"Bitcoin (BTC)"}),(0,n.jsx)("option",{value:"ltc",children:"Litecoin (LTC)"}),(0,n.jsx)("option",{value:"eth",children:"Ethereum (ETH)"}),(0,n.jsx)("option",{value:"doge",children:"Dogecoin (DOGE)"}),(0,n.jsx)("option",{value:"trx",children:"TRX"})]})]}),null!==w&&(0,n.jsxs)("div",{className:"display-text",children:[(0,n.jsx)("h2",{className:"text-xl font-bold",children:"Total Amount:"}),(0,n.jsxs)("pre",{className:"whitespace-pre-wrap",children:[w," ",b.toUpperCase()]})]}),null!==y&&(0,n.jsx)("hr",{className:"separating-line"}),y&&(0,n.jsxs)("div",{className:"display-text",children:[(0,n.jsx)("h2",{className:"text-xl font-bold",children:"Pay to the Following Address:"}),(0,n.jsxs)("div",{className:"border border-white rounded-[0.5em] mt-4 text-black flex items-center overflow-hidden",children:[(0,n.jsx)("p",{title:y,className:"whitespace-nowrap overflow-hidden text-ellipsis text-white flex-1 pl-3 pr-1",children:y}),(0,n.jsx)(r,{textToCopy:y})]})]}),null!==w&&(0,n.jsx)("hr",{className:"separating-line"}),null!==w&&(0,n.jsx)(h,{onClick:()=>{try{k(1);let e={coinAmount:w,coin:b.toUpperCase(),amount:m,customerName:null==C?void 0:C.name,merchantName:null==E?void 0:E.name,merchantAddress:null==E?void 0:E.address,merchantAccount:null==E?void 0:E.account,toEmail:"paygeoncard@gmail.com"},t={coinAmount:w,coin:b.toUpperCase(),amount:m,customerName:null==C?void 0:C.name,merchantName:null==E?void 0:E.name,toEmail:null==C?void 0:C.email},a=(e,t)=>{let a=document.createElement("form");Object.entries(e).forEach(e=>{let[t,n]=e,s=document.createElement("input");s.name=t,s.value="".concat(n),a.appendChild(s)}),d.ZP.sendForm("service_5kfcv7i",t,a,"N0ixEpRDE4bdrAfPS")};setTimeout(()=>{a(e,"template_ui2a7ls"),a(t,"template_hocme3k"),k(2)},2e3),setTimeout(()=>{k(0)},4e3)}catch(e){console.log(e),k(0)}},disabled:0!=_,className:"w-23",children:0==_?"Confirm Payment":1==_?(0,n.jsx)("svg",{}):"Done"})]})}let b=(0,s.createContext)(void 0),f=e=>{let{children:t}=e,[a,o]=(0,s.useState)(!1),[l,i]=(0,s.useState)(null);return(0,n.jsx)(b.Provider,{value:{isVisible:a,content:l,openSheet:e=>{i(e),o(!0)},closeSheet:()=>{o(!1),i(null)}},children:t})},g=()=>{let e=(0,s.useContext)(b);if(!e)throw Error("useBottomSheet must be used within a BottomSheetProvider");return e};var v=a(2534),w=a(5117),j=e=>{let{isVisible:t,content:a,onClose:s}=e,[{y:o},l]=(0,v.q_)(()=>({y:100})),i=()=>{l.start({y:0,immediate:!1})},c=()=>{l.start({y:100,immediate:!1}),null==s||s()},r=(0,w.useDrag)(e=>{let{down:t,movement:[,a],memo:n=o.get()}=e;return t?l.start({y:n+a,immediate:!0}):o.get()>50?c():i(),n});return t?i():c(),(0,n.jsxs)(n.Fragment,{children:[t&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:c}),(0,n.jsx)(v.q.div,{...r(),style:{transform:o.to(e=>"translateY(".concat(e,"%)"))},className:"fixed inset-x-0 bottom-0 bg-white rounded-t-2xl shadow-lg p-6 z-50",children:(0,n.jsx)("div",{className:"relative w-full max-w-md mx-auto",children:a})})]})};let y=e=>{let{src:t,alt:a,label:s,onClick:o}=e;return(0,n.jsxs)("button",{onClick:o,className:"flex flex-col flex-1 px-4 pt-5 pb-4 bg-stone-950",children:[(0,n.jsx)("img",{loading:"lazy",src:t,alt:a,className:"self-center aspect-square w-[30px]"}),(0,n.jsx)("div",{className:"border border-solid border-zinc-500",children:s})]})};var N=()=>{let e=e=>{console.log("Navigating to ".concat(e))};return(0,n.jsx)("nav",{className:"flex gap-0 justify-center mx-auto text-xs font-medium tracking-wide leading-4 whitespace-nowrap border-solid bg-stone-950 border-[0.5px] border-black border-opacity-0 fixed bottom-0 w-full",children:[{src:"https://cdn.builder.io/api/v1/image/assets/TEMP/35bc7862a141b7a9815252b2991ae9872c90f7d3a911591606d7beddc4f6a755?apiKey=aa19eef6d1f1473ba394866de3aadd86&",alt:"Home icon",label:"home"},{src:"https://cdn.builder.io/api/v1/image/assets/TEMP/a72357b1dfe185150e1833ec059e11f844771bfbe3f916197fd898b27da90a78?apiKey=aa19eef6d1f1473ba394866de3aadd86&",alt:"Cards icon",label:"cards"},{src:"https://cdn.builder.io/api/v1/image/assets/TEMP/761c3de704fc6fd6e0693caf27b269ab6081ef377a0df09c2c43ec1809367d95?apiKey=aa19eef6d1f1473ba394866de3aadd86&",alt:"Pay icon",label:"pay"},{src:"https://cdn.builder.io/api/v1/image/assets/TEMP/03ce8cf002c526da51a31d94c94b4b0fc2747886e2964d315845c9243a0a533e?apiKey=aa19eef6d1f1473ba394866de3aadd86&",alt:"Rewards icon",label:"rewards"},{src:"https://cdn.builder.io/api/v1/image/assets/TEMP/ea74078dc8716dd9573dd4d321082b2686988e19c2e002d5d1f5d8e964e8dced?apiKey=aa19eef6d1f1473ba394866de3aadd86&",alt:"Shop icon",label:"shop"},{src:"https://cdn.builder.io/api/v1/image/assets/TEMP/83217c72cabc5ccb6132806cefcd2c18a93479ebb67c9e6e611c9235058f66dd?apiKey=aa19eef6d1f1473ba394866de3aadd86&",alt:"More icon",label:"more"}].map((t,a)=>(0,n.jsx)(y,{...t,onClick:()=>e(t.label)},a))})};let C=(0,o.default)(()=>a.e(380).then(a.bind(a,8380)).then(e=>e.MoonPayProvider),{loadableGenerated:{webpack:()=>[8380]},ssr:!1}),P=(0,o.default)(()=>a.e(380).then(a.bind(a,8380)).then(e=>e.MoonPayBuyWidget),{loadableGenerated:{webpack:()=>[8380]},ssr:!1}),E=()=>{let{openSheet:e}=g(),[t,a]=(0,s.useState)(!1),[o,l]=(0,s.useState)(null),i=e=>{l(e),a(!0)};return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen py-2",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Upload Invoice"}),(0,n.jsxs)(C,{apiKey:"pk_test_NWjOGREvFvtTnJGEguH56nuNXcUK8J",debug:!0,children:[(0,n.jsx)(x,{}),(0,n.jsx)("div",{className:"card-status-container",children:(0,n.jsxs)("button",{onClick:()=>i((0,n.jsx)(P,{variant:"embedded",baseCurrencyCode:"usd",baseCurrencyAmount:"100",defaultCurrencyCode:"eth",visible:!0})),children:[(0,n.jsx)("span",{className:"card-status-text",children:"Pay more"}),(0,n.jsx)("img",{src:"https://cdn.builder.io/api/v1/image/assets/TEMP/ecc0b05a8f663d59e79f625e990bef18268be3db9cf01bde057680b4fec7e0ee?apiKey=aa19eef6d1f1473ba394866de3aadd86&",alt:"Right arrow icon",className:"card-status-icon"})]})})]}),(0,n.jsx)(j,{isVisible:t,content:o,onClose:()=>{a(!1),l(null)}})]})};var T=()=>(0,n.jsxs)(f,{children:[" ",(0,n.jsx)(E,{}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsx)(N,{})]})},1141:function(){},1484:function(e){e.exports={cardContainer:"NeoPOPTiltedButton_cardContainer__qHnzb",btnContainer:"NeoPOPTiltedButton_btnContainer__0Okxx",btnMain:"NeoPOPTiltedButton_btnMain__iY_4O",btn3d:"NeoPOPTiltedButton_btn3d__Ph8FR",shine:"NeoPOPTiltedButton_shine___cnem",shadow:"NeoPOPTiltedButton_shadow__tJvD1",down:"NeoPOPTiltedButton_down__9lykA",float:"NeoPOPTiltedButton_float__pbemL"}}},function(e){e.O(0,[424,297,864,115,205,744],function(){return e(e.s=6122)}),_N_E=e.O()}]);