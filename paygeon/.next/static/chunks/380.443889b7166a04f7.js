"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[380],{8380:function(e,t,n){n.r(t),n.d(t,{MoonPayBuyWidget:function(){return P},MoonPayConsumerKycWidget:function(){return W},MoonPayContext:function(){return N},MoonPayFiatBalanceDepositWidget:function(){return _},MoonPayFiatBalanceWithdrawWidget:function(){return A},MoonPayNftCheckoutWidget:function(){return k},MoonPayNftClaimWidget:function(){return $},MoonPayProvider:function(){return M},MoonPaySellWidget:function(){return L},MoonPaySwapWidget:function(){return E},MoonPaySwapsCustomerSetupWidget:function(){return j},MoonPayTopUpLedgerWidget:function(){return T},MoonPayTransactionTrackerWidget:function(){return B},MoonPayWithdrawLedgerWidget:function(){return D}});var r=n(8078),a=n(7821),s="moonpay-react-sdk-embedded-frame",i=({props:e,apiKey:t,debug:n,environment:r,signature:a})=>{let{currencyCode:i,defaultCurrencyCode:o,walletAddress:u,walletAddressTag:l,walletAddresses:d,walletAddressTags:c,colorCode:g,theme:m,themeId:x,language:f,baseCurrencyCode:v,baseCurrencyAmount:p,quoteCurrencyAmount:y,lockAmount:b,email:w,externalTransactionId:S,externalCustomerId:h,paymentMethod:N,redirectURL:M,showAllCurrencies:R,showOnlyCurrencies:U,showWalletAddressForm:q,unsupportedRegionRedirectUrl:C,skipUnsupportedRegionScreen:P,baseOrigin:W,onAuthToken:k,onInitiateDeposit:$,onKmsWalletsCreated:L,onLogin:j,onTransactionCompleted:E,onUnsupportedRegion:T,onSwapsCustomerSetupComplete:B,onCloseOverlay:D,onTransactionCreated:_,auth:A,useWarnBeforeRefresh:F,overlayNode:K}=e;return{flow:"buy",variant:e.variant,environment:r,params:{apiKey:t,signature:a,currencyCode:i,defaultCurrencyCode:o,walletAddress:u,walletAddressTag:l,walletAddresses:d,walletAddressTags:c,colorCode:g,theme:m,themeId:x,language:f,baseCurrencyCode:v,baseCurrencyAmount:p,quoteCurrencyAmount:y,lockAmount:b,email:w,externalTransactionId:S,externalCustomerId:h,paymentMethod:N,redirectURL:M,showAllCurrencies:R,showOnlyCurrencies:U,showWalletAddressForm:q,unsupportedRegionRedirectUrl:C,skipUnsupportedRegionScreen:P,baseOrigin:W},debug:n,handlers:{onAuthToken:k,onInitiateDeposit:$,onKmsWalletsCreated:L,onLogin:j,onTransactionCompleted:E,onUnsupportedRegion:T,onSwapsCustomerSetupComplete:B,onCloseOverlay:D,onTransactionCreated:_},auth:A,useWarnBeforeRefresh:F,containerNodeSelector:`#${s}`,overlayNode:K}},o=({props:e,apiKey:t,debug:n,environment:r,signature:a})=>{let{quoteCurrencyCode:i,defaultCurrencyCode:o,defaultBaseCurrencyCode:u,walletAddress:l,walletAddressTag:d,walletAddresses:c,walletAddressTags:g,colorCode:m,theme:x,themeId:f,language:v,baseCurrencyCode:p,baseCurrencyAmount:y,quoteCurrencyAmount:b,lockAmount:w,email:S,externalTransactionId:h,externalCustomerId:N,paymentMethod:M,redirectURL:R,showAllCurrencies:U,showOnlyCurrencies:q,showWalletAddressForm:C,unsupportedRegionRedirectUrl:P,skipUnsupportedRegionScreen:W,mpWalletId:k,baseOrigin:$,onAuthToken:L,onInitiateDeposit:j,onKmsWalletsCreated:E,onLogin:T,onTransactionCompleted:B,onUnsupportedRegion:D,onSwapsCustomerSetupComplete:_,onCloseOverlay:A,onTransactionCreated:F,auth:K,useWarnBeforeRefresh:V}=e;return{flow:"sell",variant:e.variant,environment:r,params:{apiKey:t,signature:a,quoteCurrencyCode:i,defaultCurrencyCode:o,defaultBaseCurrencyCode:u,walletAddress:l,walletAddressTag:d,walletAddresses:c,walletAddressTags:g,colorCode:m,theme:x,themeId:f,language:v,baseCurrencyCode:p,baseCurrencyAmount:y,quoteCurrencyAmount:b,lockAmount:w,email:S,externalTransactionId:h,externalCustomerId:N,paymentMethod:M,redirectURL:R,showAllCurrencies:U,showOnlyCurrencies:q,showWalletAddressForm:C,unsupportedRegionRedirectUrl:P,skipUnsupportedRegionScreen:W,mpWalletId:k,baseOrigin:$},debug:n,handlers:{onAuthToken:L,onInitiateDeposit:j,onKmsWalletsCreated:E,onLogin:T,onTransactionCompleted:B,onUnsupportedRegion:D,onSwapsCustomerSetupComplete:_,onCloseOverlay:A,onTransactionCreated:F},auth:K,useWarnBeforeRefresh:V,containerNodeSelector:`#${s}`}},u=({props:e,apiKey:t,debug:n,environment:r})=>{let{amount:a,amountCurrencyCode:i,theme:o,themeId:u,externalCustomerId:l,baseOrigin:d,onAuthToken:c,onLogin:g,onInitiateDeposit:m,onSwapsCustomerSetupComplete:x,onCloseOverlay:f,onTransactionCreated:v,onKmsWalletsCreated:p,onTransactionCompleted:y,onUnsupportedRegion:b,auth:w,useWarnBeforeRefresh:S}=e;return{flow:"swapsCustomerSetup",variant:e.variant,environment:r,params:{apiKey:t,amount:a,amountCurrencyCode:i,theme:o,themeId:u,externalCustomerId:l,baseOrigin:d},debug:n,handlers:{onAuthToken:c,onLogin:g,onInitiateDeposit:m,onSwapsCustomerSetupComplete:x,onCloseOverlay:f,onTransactionCreated:v,onKmsWalletsCreated:p,onTransactionCompleted:y,onUnsupportedRegion:b},auth:w,useWarnBeforeRefresh:S,containerNodeSelector:`#${s}`}},l=({props:e,apiKey:t,debug:n,environment:r})=>{let{amount:a,amountCurrencyCode:i,theme:o,themeId:u,baseOrigin:l,onLogin:d,onInitiateDeposit:c,onConsumerKycComplete:g,onKmsWalletsCreated:m,onTransactionCompleted:x,onUnsupportedRegion:f,onCloseOverlay:v,auth:p,useWarnBeforeRefresh:y}=e;return{flow:"consumerKyc",variant:e.variant,environment:r,params:{apiKey:t,amount:a,amountCurrencyCode:i,theme:o,themeId:u,baseOrigin:l},debug:n,handlers:{onLogin:d,onInitiateDeposit:c,onConsumerKycComplete:g,onKmsWalletsCreated:m,onTransactionCompleted:x,onUnsupportedRegion:f,onCloseOverlay:v},auth:p,useWarnBeforeRefresh:y,containerNodeSelector:`#${s}`}},d=({props:e,apiKey:t,debug:n,environment:r,signature:a})=>{let{contractAddress:i,tokenId:o,listingId:u,externalTransactionId:l,baseCurrencyCode:d,redirectURL:c,walletAddress:g,subPartnerName:m,metadata:x,dynamicAssetInfo:f,sellType:v,email:p,quantity:y,baseOrigin:b,onAuthToken:w,onLogin:S,onTransactionCompleted:h,onUnsupportedRegion:N,onInitiateDeposit:M,onKmsWalletsCreated:R,onCloseOverlay:U,onTransactionCreated:q,auth:C,useWarnBeforeRefresh:P}=e;return{flow:"nft",variant:e.variant,environment:r,params:{apiKey:t,signature:a,contractAddress:i,tokenId:o,listingId:u,externalTransactionId:l,baseCurrencyCode:d,redirectURL:c,walletAddress:g,subPartnerName:m,metadata:x,dynamicAssetInfo:f,sellType:v,email:p,quantity:y,baseOrigin:b},debug:n,handlers:{onAuthToken:w,onLogin:S,onTransactionCompleted:h,onUnsupportedRegion:N,onInitiateDeposit:M,onKmsWalletsCreated:R,onCloseOverlay:U,onTransactionCreated:q},auth:C,useWarnBeforeRefresh:P,containerNodeSelector:`#${s}`}},c=({props:e,apiKey:t,debug:n,environment:r,signature:a})=>{let{contractId:i,tokenId:o,initialScreen:u,onAuthToken:l,onLogin:d,onTransactionCompleted:c,onUnsupportedRegion:g,onInitiateDeposit:m,onKmsWalletsCreated:x,onCloseOverlay:f,onTransactionCreated:v,baseOrigin:p,auth:y,useWarnBeforeRefresh:b}=e;return{flow:"claim",variant:e.variant,environment:r,params:{apiKey:t,signature:a,contractId:i,tokenId:o,initialScreen:u,baseOrigin:p},debug:n,handlers:{onAuthToken:l,onLogin:d,onTransactionCompleted:c,onUnsupportedRegion:g,onInitiateDeposit:m,onKmsWalletsCreated:x,onCloseOverlay:f,onTransactionCreated:v},auth:y,useWarnBeforeRefresh:b,containerNodeSelector:`#${s}`}},g=({props:e,apiKey:t,debug:n,environment:r,signature:a})=>{let{externalCustomerId:i,theme:o,themeId:u,currencyCode:l,baseOrigin:d,onAuthToken:c,onInitiateDeposit:g,onKmsWalletsCreated:m,onLogin:x,onTransactionCompleted:f,onUnsupportedRegion:v,onSwapsCustomerSetupComplete:p,onCloseOverlay:y,onTransactionCreated:b,auth:w,useWarnBeforeRefresh:S}=e;return{flow:"topup",variant:e.variant,environment:r,params:{apiKey:t,signature:a,externalCustomerId:i,theme:o,themeId:u,currencyCode:l,baseOrigin:d},debug:n,handlers:{onAuthToken:c,onInitiateDeposit:g,onKmsWalletsCreated:m,onLogin:x,onTransactionCompleted:f,onUnsupportedRegion:v,onSwapsCustomerSetupComplete:p,onCloseOverlay:y,onTransactionCreated:b},auth:w,useWarnBeforeRefresh:S,containerNodeSelector:`#${s}`}},m=({props:e,debug:t,environment:n})=>{let{theme:r,themeId:a,baseOrigin:i,onLogin:o,onTransactionCompleted:u,onUnsupportedRegion:l,onCloseOverlay:d,onTransactionCreated:c,auth:g,useWarnBeforeRefresh:m}=e;return{flow:"fiatBalanceDeposit",variant:e.variant,environment:n,params:{theme:r,themeId:a,baseOrigin:i},debug:t,handlers:{onLogin:o,onTransactionCompleted:u,onUnsupportedRegion:l,onCloseOverlay:d,onTransactionCreated:c},auth:g,useWarnBeforeRefresh:m,containerNodeSelector:`#${s}`}},x=({props:e,debug:t,environment:n})=>{let{theme:r,themeId:a,baseOrigin:i,onLogin:o,onTransactionCompleted:u,onUnsupportedRegion:l,onCloseOverlay:d,onTransactionCreated:c,auth:g,useWarnBeforeRefresh:m}=e;return{flow:"fiatBalanceWithdraw",variant:e.variant,environment:n,params:{theme:r,themeId:a,baseOrigin:i},debug:t,handlers:{onLogin:o,onTransactionCompleted:u,onUnsupportedRegion:l,onCloseOverlay:d,onTransactionCreated:c},auth:g,useWarnBeforeRefresh:m,containerNodeSelector:`#${s}`}},f=({props:e,apiKey:t,debug:n,environment:r,signature:a})=>{let{externalCustomerId:i,theme:o,themeId:u,baseCurrencyCode:l,baseOrigin:d,onAuthToken:c,onInitiateDeposit:g,onKmsWalletsCreated:m,onLogin:x,onTransactionCompleted:f,onUnsupportedRegion:v,onSwapsCustomerSetupComplete:p,onCloseOverlay:y,onTransactionCreated:b,auth:w,useWarnBeforeRefresh:S}=e;return{flow:"withdraw",variant:e.variant,environment:r,params:{apiKey:t,signature:a,externalCustomerId:i,theme:o,themeId:u,baseCurrencyCode:l,baseOrigin:d},debug:n,handlers:{onAuthToken:c,onInitiateDeposit:g,onKmsWalletsCreated:m,onLogin:x,onTransactionCompleted:f,onUnsupportedRegion:v,onSwapsCustomerSetupComplete:p,onCloseOverlay:y,onTransactionCreated:b},auth:w,useWarnBeforeRefresh:S,containerNodeSelector:`#${s}`}},v=({props:e,apiKey:t,debug:n,environment:r,signature:a})=>{let{walletAddress:i,walletAddressTag:o,refundWalletAddress:u,baseCurrencyCode:l,baseCurrencyAmount:d,quoteCurrencyCode:c,quoteCurrencyAmount:g,colorCode:m,theme:x,themeId:f,externalCustomerId:v,baseOrigin:p,onAuthToken:y,onInitiateDeposit:b,onKmsWalletsCreated:w,onLogin:S,onTransactionCompleted:h,onUnsupportedRegion:N,onSwapsCustomerSetupComplete:M,onCloseOverlay:R,onTransactionCreated:U,auth:q,useWarnBeforeRefresh:C}=e;return{flow:"swap",variant:e.variant,environment:r,params:{apiKey:t,signature:a,walletAddress:i,walletAddressTag:o,refundWalletAddress:u,baseCurrencyCode:l,baseCurrencyAmount:d,quoteCurrencyCode:c,quoteCurrencyAmount:g,colorCode:m,theme:x,themeId:f,externalCustomerId:v,baseOrigin:p},debug:n,handlers:{onAuthToken:y,onInitiateDeposit:b,onKmsWalletsCreated:w,onLogin:S,onTransactionCompleted:h,onUnsupportedRegion:N,onSwapsCustomerSetupComplete:M,onCloseOverlay:R,onTransactionCreated:U},auth:q,useWarnBeforeRefresh:C,containerNodeSelector:`#${s}`}},p=({props:e,debug:t,environment:n})=>{let{transactionId:r,colorCode:a,theme:i,themeId:o,baseOrigin:u,onAuthToken:l,onInitiateDeposit:d,onKmsWalletsCreated:c,onLogin:g,onTransactionCompleted:m,onUnsupportedRegion:x,onSwapsCustomerSetupComplete:f,onCloseOverlay:v,onTransactionCreated:p,auth:y,useWarnBeforeRefresh:b}=e;return{flow:"transactionTracker",variant:e.variant,environment:n,params:{transactionId:r,colorCode:a,theme:i,themeId:o,baseOrigin:u},debug:t,handlers:{onAuthToken:l,onInitiateDeposit:d,onKmsWalletsCreated:c,onLogin:g,onTransactionCompleted:m,onUnsupportedRegion:x,onSwapsCustomerSetupComplete:f,onCloseOverlay:v,onTransactionCreated:p},auth:y,containerNodeSelector:`#${s}`,useWarnBeforeRefresh:b}},y={isLoading:!1,isLoaded:!1,startTime:0};async function b(e="v1"){return new Promise((t,n)=>{let r=`https://static.moonpay.com/web-sdk/${e}/moonpay-web-sdk.min.js`;if(document.querySelector(`script[src="${r}"]`)){y.isLoaded?t(window.MoonPayWebSdk?.init):y.isLoading&&(Date.now()-y.startTime>1e4?n(Error("Loading MoonPayWebSdk script timed out.")):setTimeout(()=>t(b(e)),100));return}y.isLoading=!0,y.startTime=Date.now();let a=document.createElement("script");a.async=!0,a.src=r,a.addEventListener("load",()=>{y.isLoading=!1,y.isLoaded=!0,t(window.MoonPayWebSdk?.init)}),a.addEventListener("error",()=>{y.isLoading=!1,y.isLoaded=!1,n(Error("Failed to load MoonPayWebSdk script."))}),document.body.appendChild(a)})}var w=()=>void 0,S={info:w,warn:w,error:w},h=class e{prefix;logger;constructor({logger:e,prefix:t}){this.logger=e,this.prefix=t??["Logger"]}if(t){return t?this:new e({logger:S})}info(...e){this.logger.info(`[${this.prefix}]`,...e)}warn(...e){this.logger.warn(`[${this.prefix}]`,...e)}error(...e){this.logger.error(`[${this.prefix}]`,...e)}};void 0!==window.crypto&&void 0!==window.crypto.getRandomValues||(()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));var N=(0,r.createContext)({apiKey:"",environment:"sandbox",debug:!1}),M=({children:e,apiKey:t,debug:n=!1})=>{let s=t.startsWith("pk_live")?"production":"sandbox",[i,o]=(0,r.useState)({apiKey:t,environment:s,debug:n}),u=(0,r.useCallback)(async()=>{let e=await b();o(t=>({...t,init:e}))},[o]);return(0,r.useEffect)(()=>{i.init||u()},[u,i.init]),(0,a.jsx)(N.Provider,{value:i,children:e})},R=class extends h{constructor(){super({logger:console,prefix:["MoonPay React SDK"]})}},U=(e,t,n)=>{let a=(0,r.useRef)(null),{init:s,debug:i}=(0,r.useContext)(N),o=(0,r.useRef)(new R().if(i||!1)),u=(0,r.useCallback)(async()=>{if(a.current){if(!n&&("walletAddress"in e||"walletAddresses"in e)&&o.current.warn("You must provide an `onUrlSignatureRequested` function to sign the URL when using the `walletAddress` or `walletAddresses` prop"),n){let e=a.current.generateUrlForSigning();try{let t=await n?.(e);if(!t)return;a.current?.updateSignature(t)}catch(e){o.current.error("Something went wrong calling the provided `onUrlSignatureRequested` function:",e)}}t&&a.current?.show()}},[n,t,e]);(0,r.useEffect)(()=>{a.current&&a.current.close();let t=s?.(e)||null;a.current=t,u()},[s,e,u])},q={width:"424px",height:"576px",margin:"32px 28px 32px 28px",border:"1px solid #E5E7EB",borderRadius:"16px",overflow:"hidden"};function C({config:e,onUrlSignatureRequested:t,visible:n=!0,className:r,style:i}){return(U(e,n,t),n)?(0,a.jsx)("div",{id:s,className:r,style:"embedded"===e.variant?{...q,...i}:void 0}):null}function P(e){let{apiKey:t,environment:n}=(0,r.useContext)(N),s=(0,r.useMemo)(()=>i({props:e,apiKey:t,environment:n,debug:!1,signature:e.signature||""}),[e,t,n]);return(0,a.jsx)(C,{config:s,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}function W(e){let{apiKey:t,environment:n}=(0,r.useContext)(N),s=(0,r.useMemo)(()=>l({props:e,apiKey:t,environment:n,debug:!1,signature:""}),[e,t,n]);return(0,a.jsx)(C,{config:s,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}function k(e){let{apiKey:t,environment:n}=(0,r.useContext)(N),s=(0,r.useMemo)(()=>d({props:e,apiKey:t,environment:n,debug:!1,signature:e.signature||""}),[e,t,n]);return(0,a.jsx)(C,{config:s,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}function $(e){let{apiKey:t,environment:n}=(0,r.useContext)(N),s=(0,r.useMemo)(()=>c({props:e,apiKey:t,environment:n,debug:!1,signature:e.signature||""}),[e,t,n]);return(0,a.jsx)(C,{config:s,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}function L(e){let{apiKey:t,environment:n}=(0,r.useContext)(N),s=(0,r.useMemo)(()=>o({props:e,apiKey:t,environment:n,debug:!1,signature:e.signature||""}),[e,t,n]);return(0,a.jsx)(C,{config:s,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}function j(e){let{apiKey:t,environment:n}=(0,r.useContext)(N),s=(0,r.useMemo)(()=>u({props:e,apiKey:t,environment:n,debug:!1,signature:""}),[e,t,n]);return(0,a.jsx)(C,{config:s,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}function E(e){let{apiKey:t,environment:n}=(0,r.useContext)(N),s=(0,r.useMemo)(()=>v({props:e,apiKey:t,environment:n,debug:!1,signature:e.signature||""}),[e,t,n]);return(0,a.jsx)(C,{config:s,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}function T(e){let{apiKey:t,environment:n}=(0,r.useContext)(N),s=(0,r.useMemo)(()=>g({props:e,apiKey:t,environment:n,debug:!1,signature:e.signature||""}),[e,t,n]);return(0,a.jsx)(C,{config:s,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}function B(e){let{apiKey:t,environment:n}=(0,r.useContext)(N),s=(0,r.useMemo)(()=>p({props:e,apiKey:t,environment:n,debug:!1,signature:""}),[e,t,n]);return(0,a.jsx)(C,{config:s,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}function D(e){let{apiKey:t,environment:n}=(0,r.useContext)(N),s=(0,r.useMemo)(()=>f({props:e,apiKey:t,environment:n,debug:!1,signature:e.signature||""}),[e,t,n]);return(0,a.jsx)(C,{config:s,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}function _(e){let{environment:t}=(0,r.useContext)(N),n=(0,r.useMemo)(()=>m({props:e,environment:t,debug:!1}),[e,t]);return(0,a.jsx)(C,{config:n,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}function A(e){let{environment:t}=(0,r.useContext)(N),n=(0,r.useMemo)(()=>x({props:e,environment:t,debug:!1}),[e,t]);return(0,a.jsx)(C,{config:n,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}}}]);