(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6122:function(e,t,n){Promise.resolve().then(n.bind(n,3454))},3454:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var a=n(7821),s=n(8078),o=n(9823),l=n(8858),i=n.n(l);async function r(e,t,n){var a,s;switch(e){case"btc":a="bc1qmhg6z5dgnpsswwht0x53g7yucjqfahyc60fctn",s="btc";break;case"ltc":a="ltc1q4efmghs2zupatst89tstmjvahn89hnvkuan8qa",s="ltc";break;case"eth":a="0xa44E9D6E5C9b638D9CEE82fa02c3A21a985772a8",s="eth";break;case"doge":a="D59DKnQrMYswmfFik1dbqqVBksF9j4yZ1j",s="doge";break;case"trx":a="TK2vRkUtTKhZroAny7uqLkzTwBoXUbj4Um",s="trx";break;default:throw Error("Unsupported crypto currency")}try{let e=new URLSearchParams({callback:n,address:"1.0@".concat(a),pending:"0",confirmations:"1",email:"paygeoncard@gmail.com",post:"0",json:"1",priority:"default",multi_token:"0",multi_chain:"0",convert:"1"}).toString(),t=await fetch("https://api.cryptapi.io/".concat(s,"/create/?").concat(e),{method:"GET"}),o=await t.text(),l=JSON.parse(o);if(console.log(l),"success"==l.status)return l.address_in}catch(e){throw Error("Error generating address")}}n(341),n(1141);var c=e=>{let{textToCopy:t,onCopy:n}=e,[o,l]=(0,s.useState)(!1);return(0,a.jsx)("button",{className:"w-[40px] rounded-[0.4em] h-9 bg-white flex items-center justify-center",onClick:()=>{navigator.clipboard.writeText(t),l(!0),null==n||n(),setTimeout(()=>l(!1),2e3)},children:o?(0,a.jsx)("svg",{viewBox:"0 0 24 24",height:"18",width:"18",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("g",{children:(0,a.jsx)("path",{fill:"green",d:"M9.707 19.121a.997.997 0 0 1-1.414 0l-5.646-5.647a1.5 1.5 0 0 1 0-2.121l.707-.707a1.5 1.5 0 0 1 2.121 0L9 14.171l9.525-9.525a1.5 1.5 0 0 1 2.121 0l.707.707a1.5 1.5 0 0 1 0 2.121z"})})}):(0,a.jsx)("svg",{viewBox:"0 0 6.35 6.35",height:"20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("g",{children:(0,a.jsx)("path",{fill:"currentColor",d:"M2.43.265c-.3 0-.548.236-.573.53h-.328a.74.74 0 0 0-.735.734v3.822a.74.74 0 0 0 .735.734H4.82a.74.74 0 0 0 .735-.734V1.529a.74.74 0 0 0-.735-.735h-.328a.58.58 0 0 0-.573-.53zm0 .529h1.49c.032 0 .049.017.049.049v.431c0 .032-.017.049-.049.049H2.43c-.032 0-.05-.017-.05-.049V.843c0-.032.018-.05.05-.05zm-.901.53h.328c.026.292.274.528.573.528h1.49a.58.58 0 0 0 .573-.529h.328a.2.2 0 0 1 .206.206v3.822a.2.2 0 0 1-.206.205H1.53a.2.2 0 0 1-.206-.205V1.529a.2.2 0 0 1 .206-.206z"})})})})},d=n(9197),u=n(1484),m=n.n(u),h=e=>{let{children:t,onClick:n,disabled:s=!1,className:o=""}=e;return(0,a.jsx)("div",{className:"".concat(m().cardContainer," ").concat(o),children:(0,a.jsxs)("div",{className:m().btnContainer,children:[(0,a.jsx)("div",{className:m().btnMain,children:(0,a.jsx)("button",{className:m().btn3d,onMouseDown:e=>{e.target.classList.add(m().down)},onMouseUp:e=>{e.target.classList.remove(m().down)},onTouchStart:e=>{e.target.classList.add(m().down)},onTouchEnd:e=>{e.target.classList.remove(m().down)},onClick:n,disabled:s,children:t})}),(0,a.jsx)("div",{className:m().shadow})]})})};let p=(0,o.default)(()=>Promise.all([n.e(857),n.e(466),n.e(822)]).then(n.bind(n,5822)),{loadableGenerated:{webpack:()=>[5822]},ssr:!1});function x(){let[e,t]=(0,s.useState)(null),[n,o]=(0,s.useState)(null),[l,u]=(0,s.useState)(null),[m,x]=(0,s.useState)(null),[g,v]=(0,s.useState)("btc"),[b,w]=(0,s.useState)("btc"),[f,j]=(0,s.useState)(null),[y,N]=(0,s.useState)(null),[C,_]=(0,s.useState)(null),[E,P]=(0,s.useState)(null),[T,k]=(0,s.useState)(0),S=(0,s.useRef)(null),B=()=>{o(null),u(null),x(null),j(null),N(null)},D=async t=>{let n=t||e;if(n)try{let e=await i().recognize(n,"eng",{logger:e=>console.log(e)});o(e.data.text),O(e.data.text);let t=U(e.data.text);if(!t){console.error("Failed to extract data from OCR");return}u(t);let a=A(t.amountDue);x(a.toFixed(2));let s=await r(g,a,"https://paygeon.com/api/payment");N(s),console.log(s),F(t.amountDue,a-t.amountDue,g)}catch(e){console.error("Error processing the image with Tesseract:",e)}},O=e=>{console.log(e);let t=e.match(RegExp("(?<=Bill\\s?To:?\\n|Customer:?\\n|To:?\\n).*(?:\\n.*){2}","i")),n=e.match(RegExp("(?<=From:?\\n|Merchant:?\\n).*(?:\\n.*){2}","i")),a=e.match(/(?:Notes|Memo)\s*:\s*(.*)/i),s=[],o=[];t&&(s=t[0].split("\n").map(e=>e.trim())),n&&(o=n[0].split("\n").map(e=>e.trim()));let[l,i,r]=[s.length>0?s[0].split(" ").slice(0,2).join(" "):"",s.length>1?s[1].split(" ")[0]:"",s.length>2?s[2]:""],[c,d,u,m]=[o.length>0?o[0]:"",o.length>1?o[1].split(" ")[0]:"",o.length>2?o[2]:"",a?a[1]:""];_({name:l,email:i,address:r}),P({name:c,email:d,address:u,account:m})},U=e=>{let t=e.match(/(?:Amount|Amount Due|Balance|Balance Due|Total|Total Due)\s*:?\s*\$?([\d,]+(?:\.\d{2})?)/i);if(!t)return console.error("Failed to extract amount due from OCR"),null;var n=parseFloat(t[1].replace(/,/g,""));return isNaN(n)?(console.error("Failed to parse amount due as number"),null):{amountDue:n}},A=e=>e+1.35/100*e+2.55,F=async(e,t,n)=>{let a=new URLSearchParams({value:"".concat(e+t),from:"usd"}).toString(),s=await fetch("https://api.cryptapi.io/".concat(n,"/convert/?").concat(a),{method:"GET"}),o=JSON.parse(await s.text());"success"==o.status&&(j(o.value_coin),v(n))},M=async e=>{let t=e.target.value;if(w(t),m&&l){try{let e=await r(t,m,"https://paygeon.com/api/payment");N(e)}catch(e){console.error("Error generating crypto address:",e)}await F(l.amountDue,m-l.amountDue,t)}};return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen py-2",children:[(0,a.jsx)("div",{className:"bg-transparent w-full h-[600px] flex justify-center items-center",children:(0,a.jsx)(p,{})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{onClick:()=>{let e=window.screen.width,n=window.screen.height,a=window.open("","CameraWindow","width=".concat(e,",height=").concat(n,",left=0,top=0"));if(a){a.document.write('\n      <html>\n        <head>\n          <style>\n            body {\n              display: flex;\n              flex-direction: column;\n              align-items: center;\n              justify-content: center;\n              margin: 0;\n              height: 100%;\n              background-color: #f0f0f0;\n            }\n            #camera-root {\n              display: flex; \n              flex-direction: column; \n              align-items: center; \n              justify-content: center;\n              height: 97%;\n            }\n            #video {\n              height: 100%;\n            }\n            #capture-button {\n              margin-top: 10px;\n              padding: 10px 20px;\n              font-size: 16px;\n              background-color: #4CAF50;\n              color: white;\n              border: none;\n              cursor: pointer;\n              border-radius: 5px;\n              align-self: center;\n            }\n            #capture-button:hover {\n              background-color: #45a049;\n            }\n          </style>\n        </head>\n        <body>\n          <div id="camera-root">\n            <video id="video" autoplay></video>\n            <button id="capture-button">Capture Photo</button>\n            <canvas id="canvas" style="display:none;"></canvas>\n          </div>\n        </body>\n      </html>\n    '),a.document.close();let e=n=>{if(n.origin===window.location.origin&&"CAPTURED_PHOTO"===n.data.type){let s=n.data.photo;t(s),B(),D(s),window.removeEventListener("message",e),a.close()}};window.addEventListener("message",e);let n=a.document.createElement("script");n.innerHTML="\n      (function() {\n        const video = document.getElementById('video');\n        const canvas = document.getElementById('canvas');\n        const captureButton = document.getElementById('capture-button');\n\n        navigator.mediaDevices.getUserMedia({ video: true })\n          .then((stream) => {\n            video.srcObject = stream;\n          })\n          .catch((error) => {\n            console.error('Error accessing the camera: ', error);\n          });\n\n        captureButton.onclick = () => {\n          const context = canvas.getContext('2d');\n          canvas.width = video.videoWidth;\n          canvas.height = video.videoHeight;\n          context.drawImage(video, 0, 0, canvas.width, canvas.height);\n          const dataUrl = canvas.toDataURL('image/png');\n          window.opener.postMessage({ type: 'CAPTURED_PHOTO', photo: dataUrl }, window.location.origin);\n        };\n      })();\n    ",a.document.body.appendChild(n)}},className:"custom-button custom-white-button",children:"Take a Photo"}),(0,a.jsx)("br",{}),(0,a.jsx)("input",{type:"file",accept:"image/*",ref:S,style:{display:"none"},onChange:e=>{e.target.files&&e.target.files[0]&&(t(e.target.files[0]),B(),D(e.target.files[0]))}}),(0,a.jsx)("button",{onClick:()=>{S.current&&S.current.click()},className:"custom-button custom-white-button",children:"Choose File"}),e?(0,a.jsxs)("p",{className:"display-text italic whitespace-nowrap overflow-hidden text-ellipsis pl-4",children:["Selected file: ",e.name?e.name:"captured_photo"]}):(0,a.jsx)("p",{className:"text-box",children:"No file chosen"})]}),E&&(0,a.jsx)("hr",{className:"separating-line"}),E&&m&&l&&l.amountDue&&(0,a.jsxs)("div",{className:"display-text",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Paying To:"}),(0,a.jsx)("pre",{className:"whitespace-pre-wrap",children:E.name}),(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Invoice Amount:"}),(0,a.jsxs)("pre",{className:"whitespace-pre-wrap",children:["$ ",l.amountDue.toFixed(2)]}),(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Total Amount:"}),(0,a.jsxs)("pre",{className:"whitespace-pre-wrap",children:["$ ",m]})]}),E&&!m&&(0,a.jsx)("div",{className:"display-text",children:(0,a.jsx)("pre",{className:"whitespace-pre-wrap",children:"Unable to recognize text. Please try again."})}),null!==m&&(0,a.jsx)("hr",{className:"separating-line"}),null!==m&&(0,a.jsxs)("div",{className:"display-text",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Choose crypto to pay with: "}),(0,a.jsxs)("select",{className:"dropdown-options",id:"cryptoOptions",value:b,onChange:M,children:[(0,a.jsx)("option",{value:"btc",children:"Bitcoin (BTC)"}),(0,a.jsx)("option",{value:"ltc",children:"Litecoin (LTC)"}),(0,a.jsx)("option",{value:"eth",children:"Ethereum (ETH)"}),(0,a.jsx)("option",{value:"doge",children:"Dogecoin (DOGE)"}),(0,a.jsx)("option",{value:"trx",children:"TRX"})]})]}),null!==f&&(0,a.jsxs)("div",{className:"display-text",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Total Amount:"}),(0,a.jsxs)("pre",{className:"whitespace-pre-wrap",children:[f," ",g.toUpperCase()]})]}),null!==y&&(0,a.jsx)("hr",{className:"separating-line"}),y&&(0,a.jsxs)("div",{className:"display-text",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Pay to the Following Address:"}),(0,a.jsxs)("div",{className:"border border-white rounded-[0.5em] mt-4 text-black flex items-center overflow-hidden",children:[(0,a.jsx)("p",{title:y,className:"whitespace-nowrap overflow-hidden text-ellipsis text-white flex-1 pl-3 pr-1",children:y}),(0,a.jsx)(c,{textToCopy:y})]})]}),null!==f&&(0,a.jsx)("hr",{className:"separating-line"}),null!==f&&(0,a.jsx)(h,{onClick:()=>{try{k(1);let e={coinAmount:f,coin:g.toUpperCase(),amount:m,customerName:null==C?void 0:C.name,merchantName:null==E?void 0:E.name,merchantAddress:null==E?void 0:E.address,merchantAccount:null==E?void 0:E.account,toEmail:"paygeoncard@gmail.com"},t={coinAmount:f,coin:g.toUpperCase(),amount:m,customerName:null==C?void 0:C.name,merchantName:null==E?void 0:E.name,toEmail:null==C?void 0:C.email},n=(e,t)=>{let n=document.createElement("form");Object.entries(e).forEach(e=>{let[t,a]=e,s=document.createElement("input");s.name=t,s.value="".concat(a),n.appendChild(s)}),d.ZP.sendForm("service_5kfcv7i",t,n,"N0ixEpRDE4bdrAfPS")};setTimeout(()=>{n(e,"template_ui2a7ls"),n(t,"template_hocme3k"),k(2)},2e3),setTimeout(()=>{k(0)},4e3)}catch(e){console.log(e),k(0)}},disabled:0!=T,className:"w-23",children:0==T?"Confirm Payment":1==T?(0,a.jsx)("svg",{}):"Done"})]})}let g=(0,s.createContext)(void 0),v=e=>{let{children:t}=e,[n,o]=(0,s.useState)(!1),[l,i]=(0,s.useState)(null);return(0,a.jsx)(g.Provider,{value:{isVisible:n,content:l,openSheet:e=>{i(e),o(!0)},closeSheet:()=>{o(!1),i(null)}},children:t})},b=()=>{let e=(0,s.useContext)(g);if(!e)throw Error("useBottomSheet must be used within a BottomSheetProvider");return e};var w=n(2534),f=n(5117),j=e=>{let{isVisible:t,content:n,onClose:s}=e,[{y:o},l]=(0,w.q_)(()=>({y:100})),i=()=>{l.start({y:0,immediate:!1})},r=()=>{l.start({y:100,immediate:!1}),null==s||s()},c=(0,f.useDrag)(e=>{let{down:t,movement:[,n],memo:a=o.get()}=e;return t?l.start({y:a+n,immediate:!0}):o.get()>50?r():i(),a});return t?i():r(),(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:r}),(0,a.jsx)(w.q.div,{...c(),style:{transform:o.to(e=>"translateY(".concat(e,"%)"))},className:"fixed inset-x-0 bottom-0 bg-white rounded-t-2xl shadow-lg p-6 z-50",children:(0,a.jsx)("div",{className:"relative w-full max-w-md mx-auto",children:n})})]})};let y=(0,o.default)(()=>n.e(380).then(n.bind(n,8380)).then(e=>e.MoonPayProvider),{loadableGenerated:{webpack:()=>[8380]},ssr:!1}),N=(0,o.default)(()=>n.e(380).then(n.bind(n,8380)).then(e=>e.MoonPayBuyWidget),{loadableGenerated:{webpack:()=>[8380]},ssr:!1}),C=()=>{let{openSheet:e}=b(),[t,n]=(0,s.useState)(!1),[o,l]=(0,s.useState)(null),i=e=>{l(e),n(!0)};return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen py-2",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Upload Invoice"}),(0,a.jsxs)(y,{apiKey:"pk_test_NWjOGREvFvtTnJGEguH56nuNXcUK8J",debug:!0,children:[(0,a.jsx)(x,{}),(0,a.jsx)("div",{className:"card-status-container",children:(0,a.jsxs)("button",{onClick:()=>i((0,a.jsx)(N,{variant:"embedded",baseCurrencyCode:"usd",baseCurrencyAmount:"100",defaultCurrencyCode:"eth",visible:!0})),children:[(0,a.jsx)("span",{className:"card-status-text",children:"Pay more"}),(0,a.jsx)("img",{src:"https://cdn.builder.io/api/v1/image/assets/TEMP/ecc0b05a8f663d59e79f625e990bef18268be3db9cf01bde057680b4fec7e0ee?apiKey=aa19eef6d1f1473ba394866de3aadd86&",alt:"Right arrow icon",className:"card-status-icon"})]})})]}),(0,a.jsx)(j,{isVisible:t,content:o,onClose:()=>{n(!1),l(null)}})]})};var _=()=>(0,a.jsxs)(v,{children:[" ",(0,a.jsx)(C,{})]})},1141:function(){},1484:function(e){e.exports={cardContainer:"NeoPOPTiltedButton_cardContainer__qHnzb",btnContainer:"NeoPOPTiltedButton_btnContainer__0Okxx",btnMain:"NeoPOPTiltedButton_btnMain__iY_4O",btn3d:"NeoPOPTiltedButton_btn3d__Ph8FR",shine:"NeoPOPTiltedButton_shine___cnem",shadow:"NeoPOPTiltedButton_shadow__tJvD1",down:"NeoPOPTiltedButton_down__9lykA",float:"NeoPOPTiltedButton_float__pbemL"}}},function(e){e.O(0,[424,297,864,115,205,744],function(){return e(e.s=6122)}),_N_E=e.O()}]);