(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6788:function(){},2754:function(){},6391:function(){},5001:function(){},1566:function(){},7868:function(e,t,a){Promise.resolve().then(a.bind(a,5638))},5638:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return N}});var n=a(7821),s=a(8078),o=a(9823),l=a(8858),c=a.n(l);a(341);let i={btc:{address:"bc1qmhg6z5dgnpsswwht0x53g7yucjqfahyc60fctn",ticker:"btc"},ltc:{address:"ltc1q4efmghs2zupatst89tstmjvahn89hnvkuan8qa",ticker:"ltc"},eth:{address:"0xa44E9D6E5C9b638D9CEE82fa02c3A21a985772a8",ticker:"eth"},doge:{address:"D59DKnQrMYswmfFik1dbqqVBksF9j4yZ1j",ticker:"doge"},trx:{address:"TK2vRkUtTKhZroAny7uqLkzTwBoXUbj4Um",ticker:"trx"}};function r(e){let t=i[e];if(!t)throw Error("Unsupported crypto currency");return t}async function d(e,t,a){let{address:n,ticker:s}=r(e);try{let e=new URLSearchParams({callback:a,address:"1.0@".concat(n),pending:"0",confirmations:"1",email:"paygeoncard@gmail.com",post:"1",json:"1",priority:"default",multi_token:"0",multi_chain:"0",convert:"1"}).toString(),t=await fetch("https://api.cryptapi.io/".concat(s,"/create/?").concat(e),{method:"GET"}),o=await t.text(),l=JSON.parse(o);if("success"==l.status)return l.address_in}catch(e){throw Error("Error generating address")}}async function u(e,t){let{ticker:a}=r(t);try{let t=new URLSearchParams({callback:e}).toString(),n=await fetch("https://api.cryptapi.io/".concat(a,"/logs/?").concat(t),{method:"GET"}),s=await n.text(),o=JSON.parse(s);if(console.log(o),"success"==o.status)return o.callbacks[o.callbacks.length-1]}catch(e){throw Error("Error generating address")}}a(1141);var m=e=>{let{textToCopy:t,onCopy:a}=e,[o,l]=(0,s.useState)(!1);return(0,n.jsx)("button",{className:"w-[40px] rounded-[0.4em] h-9 bg-white flex items-center justify-center",onClick:()=>{navigator.clipboard.writeText(t),l(!0),null==a||a(),setTimeout(()=>l(!1),2e3)},children:o?(0,n.jsx)("svg",{viewBox:"0 0 24 24",height:"18",width:"18",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("g",{children:(0,n.jsx)("path",{fill:"green",d:"M9.707 19.121a.997.997 0 0 1-1.414 0l-5.646-5.647a1.5 1.5 0 0 1 0-2.121l.707-.707a1.5 1.5 0 0 1 2.121 0L9 14.171l9.525-9.525a1.5 1.5 0 0 1 2.121 0l.707.707a1.5 1.5 0 0 1 0 2.121z"})})}):(0,n.jsx)("svg",{viewBox:"0 0 6.35 6.35",height:"20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("g",{children:(0,n.jsx)("path",{fill:"currentColor",d:"M2.43.265c-.3 0-.548.236-.573.53h-.328a.74.74 0 0 0-.735.734v3.822a.74.74 0 0 0 .735.734H4.82a.74.74 0 0 0 .735-.734V1.529a.74.74 0 0 0-.735-.735h-.328a.58.58 0 0 0-.573-.53zm0 .529h1.49c.032 0 .049.017.049.049v.431c0 .032-.017.049-.049.049H2.43c-.032 0-.05-.017-.05-.049V.843c0-.032.018-.05.05-.05zm-.901.53h.328c.026.292.274.528.573.528h1.49a.58.58 0 0 0 .573-.529h.328a.2.2 0 0 1 .206.206v3.822a.2.2 0 0 1-.206.205H1.53a.2.2 0 0 1-.206-.205V1.529a.2.2 0 0 1 .206-.206z"})})})})},h=a(9197),p=a(1484),x=a.n(p),f=e=>{let{children:t,onClick:a,disabled:s=!1,className:o=""}=e;return(0,n.jsx)("div",{className:"".concat(x().cardContainer," ").concat(o),children:(0,n.jsxs)("div",{className:x().btnContainer,children:[(0,n.jsx)("div",{className:x().btnMain,children:(0,n.jsx)("button",{className:x().btn3d,onMouseDown:e=>{e.target.classList.add(x().down)},onMouseUp:e=>{e.target.classList.remove(x().down)},onTouchStart:e=>{e.target.classList.add(x().down)},onTouchEnd:e=>{e.target.classList.remove(x().down)},onClick:a,disabled:s,children:t})}),(0,n.jsx)("div",{className:x().shadow})]})})},b=a(9043),g=a.n(b);let v=(0,o.default)(()=>Promise.all([a.e(857),a.e(466),a.e(822)]).then(a.bind(a,5822)),{loadableGenerated:{webpack:()=>[5822]},ssr:!1});function w(){let[e,t]=(0,s.useState)(null),[a,o]=(0,s.useState)(null),[l,i]=(0,s.useState)(null),[r,p]=(0,s.useState)(null),[x,b]=(0,s.useState)("btc"),[w,y]=(0,s.useState)("btc"),[j,N]=(0,s.useState)(null),[E,C]=(0,s.useState)(null),[k,P]=(0,s.useState)(null),[T,_]=(0,s.useState)(null),[S,O]=(0,s.useState)(0),[D,M]=(0,s.useState)(null),B=(0,s.useRef)(null),R=()=>{o(null),i(null),p(null),N(null),C(null)},U=async t=>{let a=t||e;if(a)try{var n;n="application/pdf"===a.type?await g()(a):(await c().recognize(a,"eng")).data.text,o(n);let e=A(n);if(!e){console.error("Failed to extract data from OCR");return}i(e);let t=L(e.amountDue);p(t.toFixed(2));let s=await F(e.amountDue,t-e.amountDue,x),l=new URLSearchParams({amount:"".concat(s)}).toString(),r="https://paygeon.com/api/payment?".concat(l);M(r);let u=await d(x,t,r);C(u),console.log(u)}catch(e){console.error("Error processing the image with Tesseract:",e)}},A=e=>{let t=e.match(RegExp("(?<=Bill\\s?To:?\\n|Customer:?\\n|To:?\\n).*(?:\\n.*){2}","i")),a=e.match(RegExp("(?<=From:?\\n|Merchant:?\\n).*(?:\\n.*){2}","i")),n=e.match(/(?:Notes|Memo)\s*:\s*(.*)/i);var s=[],o=[];t&&(s=t[0].split("\n").map(e=>e.trim())),a&&(o=a[0].split("\n").map(e=>e.trim()));let[l,c,i]=[s.length>0?s[0].split(" ").slice(0,2).join(" "):"",s.length>1?s[1].split(" ")[0]:"",s.length>2?s[2]:""],[r,d,u,m]=[o.length>0?o[0]:"",o.length>1?o[1].split(" ")[0]:"",o.length>2?o[2]:"",n?n[1]:""];P({name:l,email:c,address:i}),_({name:r||e.split(" ")[0],email:d,address:u,account:m});let h=e.match(RegExp("(?<!\\S)(?:Amount|Amount Due|New Balance|Balance Due|Total|Total Due)\\s*:?\\s*\\$?([\\d,]+(?:\\.\\d{2})?)","i"));if(!h)return console.error("Failed to extract amount due from OCR"),null;var p=parseFloat(h[1].replace(/,/g,""));return isNaN(p)?(console.error("Failed to parse amount due as number"),null):{amountDue:p}},L=e=>e+1.35/100*e+2.55,F=async(e,t,a)=>{let n=new URLSearchParams({value:"".concat(e+t),from:"usd"}).toString(),s=await fetch("https://api.cryptapi.io/".concat(a,"/convert/?").concat(n),{method:"GET"}),o=JSON.parse(await s.text());return"success"==o.status?(N(o.value_coin),b(a),o.value_coin):null},z=async e=>{let t=e.target.value;if(y(t),r&&l){let e=await F(l.amountDue,r-l.amountDue,t),a=new URLSearchParams({amount:"".concat(e)}).toString(),n="https://paygeon.com/api/payment?".concat(a);M(n);try{let e=await d(t,r,n);C(e)}catch(e){console.error("Error generating crypto address:",e)}}},H=async()=>{let e=await u(D,x);try{O(1);let t={coinAmount:j,coin:x.toUpperCase(),amount:r,customerName:null==k?void 0:k.name,merchantName:null==T?void 0:T.name,merchantAddress:null==T?void 0:T.address,merchantAccount:null==T?void 0:T.account,toEmail:"paygeoncard@gmail.com"},a={coinAmount:j,coin:x.toUpperCase(),amount:r,customerName:null==k?void 0:k.name,merchantName:null==T?void 0:T.name,toEmail:null==k?void 0:k.email},n=(e,t)=>{let a=document.createElement("form");Object.entries(e).forEach(e=>{let[t,n]=e,s=document.createElement("input");s.name=t,s.value="".concat(n),a.appendChild(s)}),h.ZP.sendForm("service_5kfcv7i",t,a,"N0ixEpRDE4bdrAfPS")};setTimeout(()=>{e.value_coin==j?(n(t,"template_ui2a7ls"),n(a,"template_hocme3k"),O(2)):O(3)},2e3),setTimeout(()=>{O(0)},4e3)}catch(e){console.log(e),O(0)}};return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen py-2",children:[(0,n.jsx)("div",{className:"bg-transparent w-full h-[600px] flex justify-center items-center",children:(0,n.jsx)(v,{})}),(0,n.jsxs)("div",{className:"mt-[-100px] mb-10",children:[(0,n.jsx)("button",{onClick:()=>{{let e=window.screen.width,a=window.screen.height,n=window.open("","CameraWindow","width=".concat(e,",height=").concat(a,",left=0,top=0"));if(n){n.document.write('\n          <html>\n            <head>\n              <style>\n                body {\n                  display: flex;\n                  flex-direction: column;\n                  align-items: center;\n                  justify-content: center;\n                  margin: 0;\n                  height: 100%;\n                  background-color: #f0f0f0;\n                }\n                #camera-root {\n                  display: flex; \n                  flex-direction: column; \n                  align-items: center; \n                  justify-content: center;\n                  height: 97%;\n                }\n                #video {\n                  height: 100%;\n                }\n                #capture-button {\n                  margin-top: 10px;\n                  padding: 10px 20px;\n                  font-size: 16px;\n                  background-color: #4CAF50;\n                  color: white;\n                  border: none;\n                  cursor: pointer;\n                  border-radius: 5px;\n                  align-self: center;\n                }\n                #capture-button:hover {\n                  background-color: #45a049;\n                }\n              </style>\n            </head>\n            <body>\n              <div id="camera-root">\n                <video id="video" autoplay></video>\n                <button id="capture-button">Capture Photo</button>\n                <canvas id="canvas" style="display:none;"></canvas>\n              </div>\n            </body>\n          </html>\n        '),n.document.close();let e=a=>{if(a.origin===window.location.origin&&"CAPTURED_PHOTO"===a.data.type){let s=a.data.photo;t(s),R(),U(s),window.removeEventListener("message",e),n.close()}};window.addEventListener("message",e);let a=n.document.createElement("script");a.innerHTML="\n          (function() {\n            const video = document.getElementById('video');\n            const canvas = document.getElementById('canvas');\n            const captureButton = document.getElementById('capture-button');\n  \n            navigator.mediaDevices.getUserMedia({ video: true })\n              .then((stream) => {\n                video.srcObject = stream;\n              })\n              .catch((error) => {\n                console.error('Error accessing the camera: ', error);\n              });\n  \n            captureButton.onclick = () => {\n              const context = canvas.getContext('2d');\n              canvas.width = video.videoWidth;\n              canvas.height = video.videoHeight;\n              context.drawImage(video, 0, 0, canvas.width, canvas.height);\n              const dataUrl = canvas.toDataURL('image/png');\n              window.opener.postMessage({ type: 'CAPTURED_PHOTO', photo: dataUrl }, window.location.origin);\n            };\n          })();\n        ",n.document.body.appendChild(a)}}},className:"custom-button custom-white-button",children:"Take a Photo"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{type:"file",accept:"image/*, application/pdf",ref:B,style:{display:"none"},onChange:e=>{e.target.files&&e.target.files[0]&&(t(e.target.files[0]),R(),U(e.target.files[0]))}}),(0,n.jsx)("button",{onClick:()=>{B.current&&B.current.click()},className:"custom-button custom-white-button",children:"Choose File"}),e?(0,n.jsxs)("p",{className:"display-text italic whitespace-nowrap overflow-hidden text-ellipsis pl-4",children:["Selected file: ",e.name?e.name:"captured_photo"]}):(0,n.jsx)("p",{className:"text-box",children:"No file chosen"})]}),T&&(0,n.jsx)("hr",{className:"separating-line"}),T&&r&&l&&l.amountDue&&(0,n.jsxs)("div",{className:"display-text",children:[(0,n.jsx)("h2",{className:"text-xl font-bold",children:"Paying To:"}),(0,n.jsx)("pre",{className:"whitespace-pre-wrap",children:T.name}),(0,n.jsx)("h2",{className:"text-xl font-bold",children:"Invoice Amount:"}),(0,n.jsxs)("pre",{className:"whitespace-pre-wrap",children:["$ ",l.amountDue.toFixed(2)]}),(0,n.jsx)("h2",{className:"text-xl font-bold",children:"Total Amount:"}),(0,n.jsxs)("pre",{className:"whitespace-pre-wrap",children:["$ ",r]})]}),T&&!r&&(0,n.jsx)("div",{className:"display-text",children:(0,n.jsx)("pre",{className:"whitespace-pre-wrap",children:"Unable to recognize text. Please try again."})}),null!==r&&(0,n.jsx)("hr",{className:"separating-line"}),null!==r&&(0,n.jsxs)("div",{className:"display-text",children:[(0,n.jsx)("h2",{className:"text-xl font-bold",children:"Choose crypto to pay with: "}),(0,n.jsxs)("select",{className:"dropdown-options",id:"cryptoOptions",value:w,onChange:z,children:[(0,n.jsx)("option",{value:"btc",children:"Bitcoin (BTC)"}),(0,n.jsx)("option",{value:"ltc",children:"Litecoin (LTC)"}),(0,n.jsx)("option",{value:"eth",children:"Ethereum (ETH)"}),(0,n.jsx)("option",{value:"doge",children:"Dogecoin (DOGE)"}),(0,n.jsx)("option",{value:"trx",children:"TRX"})]})]}),null!==j&&(0,n.jsxs)("div",{className:"display-text",children:[(0,n.jsx)("h2",{className:"text-xl font-bold",children:"Total Amount:"}),(0,n.jsxs)("pre",{className:"whitespace-pre-wrap",children:[j," ",x.toUpperCase()]})]}),null!==E&&(0,n.jsx)("hr",{className:"separating-line"}),E&&(0,n.jsxs)("div",{className:"display-text",children:[(0,n.jsx)("h2",{className:"text-xl font-bold",children:"Pay to the Following Address:"}),(0,n.jsxs)("div",{className:"border border-white rounded-[0.5em] mt-4 text-black flex items-center overflow-hidden",children:[(0,n.jsx)("p",{title:E,className:"whitespace-nowrap overflow-hidden text-ellipsis text-white flex-1 pl-3 pr-1",children:E}),(0,n.jsx)(m,{textToCopy:E})]})]}),null!==j&&(0,n.jsx)("hr",{className:"separating-line"}),null!==j&&(0,n.jsx)(f,{onClick:H,disabled:0!=S,className:"w-23",children:0==S?"Confirm Payment":1==S?(0,n.jsx)("svg",{}):2==S?"Success":"Failed. Please Try Again."})]})}a(3812);var y=a(3253);function j(e){let{children:t}=e;return(0,n.jsx)("html",{lang:"en",children:(0,n.jsxs)("body",{children:[(0,n.jsx)(y.default,{}),t]})})}var N=()=>{let e=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let t=()=>{console.log("Widget loaded")},a=e.current;if(a)return a.addEventListener("load",t),()=>{a.removeEventListener("load",t)}},[]),(0,n.jsx)(j,{children:(0,n.jsxs)("div",{className:"flex flex-col bg-black items-center justify-center min-h-screen py-2",children:[(0,n.jsx)("div",{ref:e,"data-storeez-id":"widget-6e5b310d1e199524"}),(0,n.jsx)("h1",{className:"text-3xl text-white font-bold mb-4",children:"Upload Invoice"}),(0,n.jsx)(w,{})]})})}},3253:function(e,t,a){"use strict";a.d(t,{default:function(){return m}});var n=a(7821),s=a(8078),o=a(9823),l=a(2534),c=a(5117),i=e=>{let{isVisible:t,content:a,onClose:o}=e,[{y:i},r]=(0,l.q_)(()=>({y:100})),d=()=>{r.start({y:0,immediate:!1})},u=()=>{r.start({y:100,immediate:!1}),null==o||o()},m=(0,c.useDrag)(e=>{let{down:t,movement:[,a],memo:n=i.get()}=e;return t?r.start({y:n+a,immediate:!0}):i.get()>50?u():d(),n});return(0,s.useEffect)(()=>{t?d():u()},[t]),(0,n.jsxs)(n.Fragment,{children:[t&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:u}),(0,n.jsx)(l.q.div,{...m(),style:{transform:i.to(e=>"translateY(".concat(e,"%)"))},className:"fixed inset-x-0 bottom-0 bg-white rounded-t-2xl shadow-lg p-6 z-50",children:(0,n.jsx)("div",{className:"relative w-full max-w-md mx-auto",children:a})})]})};a(100);let r=(0,o.default)(()=>a.e(380).then(a.bind(a,8380)).then(e=>e.MoonPayProvider),{loadableGenerated:{webpack:()=>[8380]},ssr:!1}),d=(0,o.default)(()=>a.e(380).then(a.bind(a,8380)).then(e=>e.MoonPayBuyWidget),{loadableGenerated:{webpack:()=>[8380]},ssr:!1}),u=e=>{let{src:t,alt:a,label:s,href:o,onClick:l}=e;return(0,n.jsxs)("a",{href:o,onClick:l,className:"flex flex-col flex-1 px-4 pt-5 pb-4 bg-stone-950 cursor-pointer",children:[(0,n.jsx)("img",{loading:"lazy",src:t,alt:a,className:"self-center aspect-square w-[30px]"}),(0,n.jsx)("div",{className:"border border-solid border-zinc-500",children:s})]})};var m=()=>{let[e,t]=(0,s.useState)(!1),[a,o]=(0,s.useState)(!1),l=[{src:"https://cdn.builder.io/api/v1/image/assets/TEMP/35bc7862a141b7a9815252b2991ae9872c90f7d3a911591606d7beddc4f6a755?apiKey=aa19eef6d1f1473ba394866de3aadd86&",alt:"Home icon",label:"Home",href:"/"},{src:"https://cdn.builder.io/api/v1/image/assets/TEMP/a72357b1dfe185150e1833ec059e11f844771bfbe3f916197fd898b27da90a78?apiKey=aa19eef6d1f1473ba394866de3aadd86&",alt:"Cards icon",label:"Cards",href:"/cards"},{src:"https://cdn.builder.io/api/v1/image/assets/TEMP/761c3de704fc6fd6e0693caf27b269ab6081ef377a0df09c2c43ec1809367d95?apiKey=aa19eef6d1f1473ba394866de3aadd86&",alt:"Pay icon",label:"Pay",href:"/pay"},{src:"https://cdn.builder.io/api/v1/image/assets/TEMP/03ce8cf002c526da51a31d94c94b4b0fc2747886e2964d315845c9243a0a533e?apiKey=aa19eef6d1f1473ba394866de3aadd86&",alt:"Rewards icon",label:"Rewards",href:"/rewards"},{src:"https://cdn.builder.io/api/v1/image/assets/TEMP/ea74078dc8716dd9573dd4d321082b2686988e19c2e002d5d1f5d8e964e8dced?apiKey=aa19eef6d1f1473ba394866de3aadd86&",alt:"Shop icon",label:"Shop",href:"/shop"},{src:"https://cdn.builder.io/api/v1/image/assets/TEMP/83217c72cabc5ccb6132806cefcd2c18a93479ebb67c9e6e611c9235058f66dd?apiKey=aa19eef6d1f1473ba394866de3aadd86&",alt:"More icon",label:"More",onClick:()=>{t(!e)}}];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("nav",{className:"flex gap-0 justify-center mx-none text-xs text-white font-medium tracking-wide leading-4 whitespace-nowrap border-solid bg-stone-950 border-[0.5px] border-black z-20 border-opacity-0 fixed bottom-0 w-full",children:l.map((e,t)=>(0,n.jsx)(u,{...e},t))}),(0,n.jsx)(i,{isVisible:e,onClose:()=>{t(!1),o(!1)},content:(0,n.jsxs)("div",{className:"flex flex-col relative w-full max-w-md mx-auto items-center",children:[(0,n.jsx)("h2",{className:"text-xl font-bold text-black",children:"More"}),(0,n.jsx)("hr",{className:"header-line"}),(0,n.jsxs)(r,{apiKey:"pk_test_NWjOGREvFvtTnJGEguH56nuNXcUK8J",debug:!0,children:[(0,n.jsx)(d,{variant:"overlay",baseCurrencyCode:"usd",baseCurrencyAmount:"100",defaultCurrencyCode:"eth",visible:a}),(0,n.jsx)("button",{className:"text-black",onClick:()=>o(!0),children:"Add Crypto"})]})]})})]})}},3812:function(){},1141:function(){},100:function(){},1484:function(e){e.exports={cardContainer:"NeoPOPTiltedButton_cardContainer__qHnzb",btnContainer:"NeoPOPTiltedButton_btnContainer__0Okxx",btnMain:"NeoPOPTiltedButton_btnMain__iY_4O",btn3d:"NeoPOPTiltedButton_btn3d__Ph8FR",shine:"NeoPOPTiltedButton_shine___cnem",shadow:"NeoPOPTiltedButton_shadow__tJvD1",down:"NeoPOPTiltedButton_down__9lykA",float:"NeoPOPTiltedButton_float__pbemL"}}},function(e){e.O(0,[677,976,297,130,584,115,205,744],function(){return e(e.s=7868)}),_N_E=e.O()}]);